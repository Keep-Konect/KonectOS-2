packages:
  - name: boot
    source:
      subdir: 'sources/core/modules'
    tools_required:
      - host-gcc
    build:
      - args: 
        - 'make'
        - '-C'
        - '@THIS_SOURCE_DIR@/target/@OPTION:arch_name@'
        - 'build'
        environ:
          CC: "@OPTION:cc@"
          CXX: "@OPTION:cxx@"
          LD: "@OPTION:ld@"
          ASMC: "@OPTION:asmc@"
      - args: 
        - 'cp'
        - '-r'
        - '@THIS_SOURCE_DIR@/target/@OPTION:arch_name@/bin/.'
        - '@SOURCE_ROOT@/target/boot_disk_kot_mount/.'
        
  - name: ahci
    source:
      subdir: 'sources/core/modules'
    tools_required:
      - host-gcc
    build:
      - args: 
        - 'make'
        - '-C'
        - '@THIS_SOURCE_DIR@/target/@OPTION:arch_name@'
        - 'build'
        environ:
          CC: "@OPTION:cc@"
          CXX: "@OPTION:cxx@"
          LD: "@OPTION:ld@"
          ASMC: "@OPTION:asmc@"
      - args: 
        - 'cp'
        - '-r'
        - '@THIS_SOURCE_DIR@/target/@OPTION:arch_name@/bin/.'
        - '@SOURCE_ROOT@/target/boot_disk_kot_mount/.'

  - name: fat32
    source:
      subdir: 'sources/core/modules'
    tools_required:
      - host-gcc
    build:
      - args: 
        - 'make'
        - '-C'
        - '@THIS_SOURCE_DIR@/target/@OPTION:arch_name@'
        - 'build'
        environ:
          CC: "@OPTION:cc@"
          CXX: "@OPTION:cxx@"
          LD: "@OPTION:ld@"
          ASMC: "@OPTION:asmc@"
      - args: 
        - 'cp'
        - '-r'
        - '@THIS_SOURCE_DIR@/target/@OPTION:arch_name@/bin/.'
        - '@SOURCE_ROOT@/target/boot_disk_kot_mount/.'

  - name: pci
    source:
      subdir: 'sources/core/modules'
    tools_required:
      - host-gcc
    build:
      - args: 
        - 'make'
        - '-C'
        - '@THIS_SOURCE_DIR@/target/@OPTION:arch_name@'
        - 'build'
        environ:
          CC: "@OPTION:cc@"
          CXX: "@OPTION:cxx@"
          LD: "@OPTION:ld@"
          ASMC: "@OPTION:asmc@"
      - args: 
        - 'cp'
        - '-r'
        - '@THIS_SOURCE_DIR@/target/@OPTION:arch_name@/bin/.'
        - '@SOURCE_ROOT@/target/boot_disk_kot_mount/.'

  - name: rtc
    source:
      subdir: 'sources/core/modules'
    tools_required:
      - host-gcc
    build:
      - args: 
        - 'make'
        - '-C'
        - '@THIS_SOURCE_DIR@/target/@OPTION:arch_name@'
        - 'build'
        environ:
          CC: "@OPTION:cc@"
          CXX: "@OPTION:cxx@"
          LD: "@OPTION:ld@"
          ASMC: "@OPTION:asmc@"
      - args: 
        - 'cp'
        - '-r'
        - '@THIS_SOURCE_DIR@/target/@OPTION:arch_name@/bin/.'
        - '@SOURCE_ROOT@/target/boot_disk_kot_mount/.'

  - name: storage
    source:
      subdir: 'sources/core/modules'
    tools_required:
      - host-gcc
    build:
      - args: 
        - 'make'
        - '-C'
        - '@THIS_SOURCE_DIR@/target/@OPTION:arch_name@'
        - 'build'
        environ:
          CC: "@OPTION:cc@"
          CXX: "@OPTION:cxx@"
          LD: "@OPTION:ld@"
          ASMC: "@OPTION:asmc@"
      - args: 
        - 'cp'
        - '-r'
        - '@THIS_SOURCE_DIR@/target/@OPTION:arch_name@/bin/.'
        - '@SOURCE_ROOT@/target/boot_disk_kot_mount/.'

  - name: test
    source:
      subdir: 'sources/core/modules'
    tools_required:
      - host-gcc
    build:
      - args: 
        - 'make'
        - '-C'
        - '@THIS_SOURCE_DIR@/target/@OPTION:arch_name@'
        - 'build'
        environ:
          CC: "@OPTION:cc@"
          CXX: "@OPTION:cxx@"
          LD: "@OPTION:ld@"
          ASMC: "@OPTION:asmc@"
      - args: 
        - 'cp'
        - '-r'
        - '@THIS_SOURCE_DIR@/target/@OPTION:arch_name@/bin/.'
        - '@SOURCE_ROOT@/target/boot_disk_kot_mount/.'

  - name: vfs
    source:
      subdir: 'sources/core/modules'
    tools_required:
      - host-gcc
    build:
      - args:
        - 'make'
        - '-C'
        - '@THIS_SOURCE_DIR@/target/@OPTION:arch_name@'
        - 'build'
        environ:
          CC: "@OPTION:cc@"
          CXX: "@OPTION:cxx@"
          LD: "@OPTION:ld@"
          ASMC: "@OPTION:asmc@"
      - args: 
        - 'cp'
        - '-r'
        - '@THIS_SOURCE_DIR@/target/@OPTION:arch_name@/bin/.'
        - '@SOURCE_ROOT@/target/boot_disk_kot_mount/.'

  - name: devfs
    source:
      subdir: 'sources/core/modules'
    tools_required:
      - host-gcc
    build:
      - args:
        - 'make'
        - '-C'
        - '@THIS_SOURCE_DIR@/target/@OPTION:arch_name@'
        - 'build'
        environ:
          CC: "@OPTION:cc@"
          CXX: "@OPTION:cxx@"
          LD: "@OPTION:ld@"
          ASMC: "@OPTION:asmc@"
      - args: 
        - 'cp'
        - '-r'
        - '@THIS_SOURCE_DIR@/target/@OPTION:arch_name@/bin/.'
        - '@SOURCE_ROOT@/target/boot_disk_kot_mount/.'

  - name: devconsole
    source:
      subdir: 'sources/core/modules'
    tools_required:
      - host-gcc
    build:
      - args:
        - 'make'
        - '-C'
        - '@THIS_SOURCE_DIR@/target/@OPTION:arch_name@'
        - 'build'
        environ:
          CC: "@OPTION:cc@"
          CXX: "@OPTION:cxx@"
          LD: "@OPTION:ld@"
          ASMC: "@OPTION:asmc@"
      - args: 
        - 'cp'
        - '-r'
        - '@THIS_SOURCE_DIR@/target/@OPTION:arch_name@/bin/.'
        - '@SOURCE_ROOT@/target/boot_disk_kot_mount/.'

  - name: devfb
    source:
      subdir: 'sources/core/modules'
    tools_required:
      - host-gcc
    build:
      - args:
        - 'make'
        - '-C'
        - '@THIS_SOURCE_DIR@/target/@OPTION:arch_name@'
        - 'build'
        environ:
          CC: "@OPTION:cc@"
          CXX: "@OPTION:cxx@"
          LD: "@OPTION:ld@"
          ASMC: "@OPTION:asmc@"
      - args: 
        - 'cp'
        - '-r'
        - '@THIS_SOURCE_DIR@/target/@OPTION:arch_name@/bin/.'
        - '@SOURCE_ROOT@/target/boot_disk_kot_mount/.'

  - name: ps2
    source:
      subdir: 'sources/core/modules'
    tools_required:
      - host-gcc
    build:
      - args:
        - 'make'
        - '-C'
        - '@THIS_SOURCE_DIR@/target/@OPTION:arch_name@'
        - 'build'
        environ:
          CC: "@OPTION:cc@"
          CXX: "@OPTION:cxx@"
          LD: "@OPTION:ld@"
          ASMC: "@OPTION:asmc@"
      - args: 
        - 'cp'
        - '-r'
        - '@THIS_SOURCE_DIR@/target/@OPTION:arch_name@/bin/.'
        - '@SOURCE_ROOT@/target/boot_disk_kot_mount/.'

  - name: hid
    source:
      subdir: 'sources/core/modules'
    tools_required:
      - host-gcc
    build:
      - args:
        - 'make'
        - '-C'
        - '@THIS_SOURCE_DIR@/target/@OPTION:arch_name@'
        - 'build'
        environ:
          CC: "@OPTION:cc@"
          CXX: "@OPTION:cxx@"
          LD: "@OPTION:ld@"
          ASMC: "@OPTION:asmc@"
      - args: 
        - 'cp'
        - '-r'
        - '@THIS_SOURCE_DIR@/target/@OPTION:arch_name@/bin/.'
        - '@SOURCE_ROOT@/target/boot_disk_kot_mount/.'

  - name: e1000
    source:
      subdir: 'sources/core/modules'
    tools_required:
      - host-gcc
    build:
      - args:
        - 'make'
        - '-C'
        - '@THIS_SOURCE_DIR@/target/@OPTION:arch_name@'
        - 'build'
        environ:
          CC: "@OPTION:cc@"
          CXX: "@OPTION:cxx@"
          LD: "@OPTION:ld@"
          ASMC: "@OPTION:asmc@"
      - args: 
        - 'cp'
        - '-r'
        - '@THIS_SOURCE_DIR@/target/@OPTION:arch_name@/bin/.'
        - '@SOURCE_ROOT@/target/boot_disk_kot_mount/.'

  - name: doom
    source:
      subdir: 'bundled'
      git: 'https://github.com/kot-org/doom'
      branch: 'master'
    tools_required:
      - host-gcc
    pkgs_required:
      - mlibc
    build:
      - args:
        - 'make'
        - '-C'
        - '@THIS_SOURCE_DIR@/target/@OPTION:arch_name@'
        - 'build'
        environ:
          CC: "@OPTION:cc@"
          CXX: "@OPTION:cxx@"
          LD: "@OPTION:ld@"
          ASMC: "@OPTION:asmc@"
      - args: 
        - 'cp'
        - '-r'
        - '@THIS_SOURCE_DIR@/target/@OPTION:arch_name@/bin/.'
        - '@SOURCE_ROOT@/target/boot_disk_kot_mount/.'

  - name: net
    source:
      subdir: 'sources/core/modules'
    tools_required:
      - host-gcc
    build:
      - args:
        - 'make'
        - '-C'
        - '@THIS_SOURCE_DIR@/target/@OPTION:arch_name@'
        - 'build'
        environ:
          CC: "@OPTION:cc@"
          CXX: "@OPTION:cxx@"
          LD: "@OPTION:ld@"
          ASMC: "@OPTION:asmc@"
      - args: 
        - 'cp'
        - '-r'
        - '@THIS_SOURCE_DIR@/target/@OPTION:arch_name@/bin/.'
        - '@SOURCE_ROOT@/target/boot_disk_kot_mount/.'